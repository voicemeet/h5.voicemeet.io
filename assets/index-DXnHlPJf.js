import{l as P,a as $,F as C,_ as D}from"./logo-dark-b0WhAzv4.js";import{d as E,u as F,f as N,ay as R,j as f,az as g,H as U,aA as h,a as z,o as H,h as l,g as t,e,m as I,w as c,an as j,ao as v,t as y,y as A,v as G,aB as Q}from"./index-NvLtHfbn.js";import"./index-ZWJhGmMP.js";import{F as T}from"./index-DH8RdCRD.js";import{b as w}from"./route-block-B_A1xBdJ.js";const W={class:"layout-bg m-x-a p-[16px] text-center flex-1 w-7xl"},J={class:"mb-32 mt-20"},K={class:"rounded-3xl overflow-hidden"},L={class:"mt-16 rounded-3xl overflow-hidden"},M={class:"mt-16"},O=E({__name:"index",setup(X){const{t:r}=F(),n=N(),b=R(),u=f(!1),p=f(g.value);U(()=>g.value,o=>{p.value=o});const a=h({username:"",password:""});function k(o){return o?/^1[3-9]\d{9}$/.test(a.username)?null:r("login.pleaseEnterCorrectPhone"):r("login.pleaseEnterPhone")}const i=h({username:[{validator:k}],password:[{required:!0,message:r("login.pleaseEnterPassword")}]});async function V(o){try{u.value=!0,await b.login({...a,...o});const{redirect:s,...d}=n.currentRoute.value.query;n.push({path:s||Q,query:{...d}})}finally{u.value=!1}}function x(){const o=n.currentRoute.value.query;n.push({name:"sms-login",query:o})}return(o,s)=>{const d=I,_=T,B=j,S=C,q=D;return H(),z("div",W,[l("div",J,[t(d,{src:e(p)?e(P):e($),round:"",class:"rounded-full h-120 w-120",alt:"brand logo"},null,8,["src"])]),t(S,{model:e(a),rules:e(i),"validate-trigger":"onSubmit",onSubmit:V},{default:c(()=>[l("div",K,[t(_,{modelValue:e(a).username,"onUpdate:modelValue":s[0]||(s[0]=m=>e(a).username=m),rules:e(i).username,name:"username",type:"tel",placeholder:o.$t("login.phone")},null,8,["modelValue","rules","placeholder"])]),l("div",L,[t(_,{modelValue:e(a).password,"onUpdate:modelValue":s[1]||(s[1]=m=>e(a).password=m),type:"password",rules:e(i).password,name:"password",placeholder:o.$t("login.password")},null,8,["modelValue","rules","placeholder"])]),l("div",M,[t(B,{loading:e(u),type:"primary","native-type":"submit",round:"",block:""},{default:c(()=>[v(y(o.$t("login.login")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),t(q,{block:"",style:A({"margin-top":e(G)(18)}),onClick:x},{default:c(()=>[v(y(o.$t("login.login-with-phone")),1)]),_:1},8,["style"])])}}});typeof w=="function"&&w(O);export{O as default};
