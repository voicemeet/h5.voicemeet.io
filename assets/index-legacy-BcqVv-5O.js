System.register(["./index-legacy-B6MLUoZK.js","./index-legacy-CTzP8Gm0.js","./index-legacy-DT0HhxBc.js","./route-block-legacy-LtztSDKr.js"],function(e,l){"use strict";var t,n,o,a,i,s,u,c,r,d,v,p,m,f,g,h,b,x,w,y,k,C,V,O,H,S,T,D,I,M,B,N,$,_,E,z,j,F,P,G,L,U,W,Y,A,J,Q,X,q,K,R,Z,ee;return{setters:[e=>{t=e.M,n=e.L,o=e.a1,a=e.aC,i=e.d,s=e.a7,u=e.T,c=e.Y,r=e.j,d=e.aD,v=e.c,p=e.a9,m=e.aa,f=e.aE,g=e.au,h=e.g,b=e.aF,x=e.V,w=e.R,y=e.ac,k=e.ad,C=e.aG,V=e.H,O=e.W,H=e.O,S=e.N,T=e.S,D=e.aH,I=e.J,M=e.aI,B=e.X,N=e.Z,$=e.ab,_=e.a8,E=e.ay,z=e.az,j=e.aJ,F=e.aK,P=e.aL,G=e.a,L=e.o,U=e.h,W=e.w,Y=e.e,A=e.t,J=e.m,Q=e.am,X=e.P,q=e.F,K=e.aM},e=>{R=e.C},e=>{Z=e.C},e=>{ee=e.b}],execute:function(){const[l,le,te]=t("picker"),ne=e=>e.find(e=>!e.disabled)||e[0];function oe(e,l){for(let t=l=a(l,0,e.length);t<e.length;t++)if(!e[t].disabled)return t;for(let t=l-1;t>=0;t--)if(!e[t].disabled)return t;return 0}const ae=(e,l,t)=>void 0!==l&&e.some(e=>e[t.value]===l);function ie(e,l,t){const n=e.findIndex(e=>e[t.value]===l);return e[oe(e,n)]}const[se,ue]=t("picker-column"),ce=Symbol(se);var re=i({name:se,props:{value:c,fields:s(Object),options:u(),readonly:Boolean,allowHtml:Boolean,optionHeight:s(Number),swipeDuration:s(c),visibleOptionNum:s(c)},emits:["change","clickOption","scrollInto"],setup(e,{emit:l,slots:t}){let n,o,i,s,u;const c=r(),x=r(),w=r(0),y=r(0),k=d(),C=()=>e.options.length,V=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,O=t=>{let o=oe(e.options,t);const a=-o*e.optionHeight,i=()=>{o>C()-1&&(o=oe(e.options,t));const n=e.options[o][e.fields.value];n!==e.value&&l("change",n)};n&&a!==w.value?u=i:i(),w.value=a},H=()=>e.readonly||!e.options.length,S=l=>a(Math.round(-l/e.optionHeight),0,C()-1),T=v(()=>S(w.value)),D=()=>{n=!1,y.value=0,u&&(u(),u=null)},I=e=>{if(!H()){if(k.start(e),n){const e=function(e){const{transform:l}=window.getComputedStyle(e),t=l.slice(7,l.length-1).split(", ")[5];return Number(t)}(x.value);w.value=Math.min(0,e-V())}y.value=0,o=w.value,i=Date.now(),s=o,u=null}},M=()=>{if(H())return;const l=w.value-s,t=Date.now()-i;if(t<300&&Math.abs(l)>15)return void((l,t)=>{const n=Math.abs(l/t);l=w.value+n/.003*(l<0?-1:1);const o=S(l);y.value=+e.swipeDuration,O(o)})(l,t);const o=S(w.value);y.value=200,O(o),setTimeout(()=>{n=!1},0)},B=()=>{const o={height:`${e.optionHeight}px`};return e.options.map((a,i)=>{const s=a[e.fields.text],{disabled:c}=a,r=a[e.fields.value],d={role:"button",style:o,tabindex:c?-1:0,class:[ue("item",{disabled:c,selected:r===e.value}),a.className],onClick:()=>(t=>{n||H()||(u=null,y.value=200,O(t),l("clickOption",e.options[t]))})(i)},v={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:s};return h("li",d,[t.option?t.option(a,i):h("div",v,null)])})};return p(ce),m({stopMomentum:D}),f(()=>{const l=n?Math.floor(-w.value/e.optionHeight):e.options.findIndex(l=>l[e.fields.value]===e.value),t=oe(e.options,l),o=-t*e.optionHeight;n&&t<l&&D(),w.value=o}),g("touchmove",t=>{if(H())return;k.move(t),k.isVertical()&&(n=!0,b(t,!0));const u=a(o+k.deltaY.value,-C()*e.optionHeight,e.optionHeight),c=S(u);c!==T.value&&l("scrollInto",e.options[c]),w.value=u;const r=Date.now();r-i>300&&(i=r,s=u)},{target:c}),()=>h("div",{ref:c,class:ue(),onTouchstartPassive:I,onTouchend:M,onTouchcancel:M},[h("ul",{ref:x,style:{transform:`translate3d(0, ${w.value+V()}px, 0)`,transitionDuration:`${y.value}ms`,transitionProperty:y.value?"all":"none"},class:ue("wrapper"),onTransitionend:D},[B()])])}});const[de]=t("picker-toolbar"),ve={title:String,cancelButtonText:String,confirmButtonText:String},pe=["cancel","confirm","title","toolbar"],me=Object.keys(ve);var fe=i({name:de,props:ve,emits:["confirm","cancel"],setup(e,{emit:l,slots:t}){const n=()=>l("cancel"),o=()=>l("confirm"),a=()=>{var l;const o=null!=(l=e.cancelButtonText)?l:te("cancel");if(t.cancel||o)return h("button",{type:"button",class:[le("cancel"),x],onClick:n},[t.cancel?t.cancel():o])},i=()=>{var l;const n=null!=(l=e.confirmButtonText)?l:te("confirm");if(t.confirm||n)return h("button",{type:"button",class:[le("confirm"),x],onClick:o},[t.confirm?t.confirm():n])};return()=>h("div",{class:le("toolbar")},[t.toolbar?t.toolbar():[a(),t.title?t.title():e.title?h("div",{class:[le("title"),"van-ellipsis"]},[e.title]):void 0,i()]])}});const[ge]=t("picker-group"),he=Symbol(ge);n({tabs:u(),activeTab:y(0),nextStepText:String,showToolbar:w},ve);const be=n({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:y(44),showToolbar:w,swipeDuration:y(1e3),visibleOptionNum:y(6)},ve),xe=n({},be,{columns:u(),modelValue:u(),toolbarPosition:T("top"),columnsFieldNames:Object});var we=i({name:l,props:xe,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:l,slots:t}){const a=r(),i=r(e.modelValue.slice(0)),{parent:s}=p(he),{children:u,linkChildren:c}=k(ce);c();const d=v(()=>function(e){return n({text:"text",value:"value",children:"children"},e)}(e.columnsFieldNames)),f=v(()=>C(e.optionHeight)),x=v(()=>function(e,l){const t=e[0];if(t){if(Array.isArray(t))return"multiple";if(l.children in t)return"cascade"}return"default"}(e.columns,d.value)),w=v(()=>{const{columns:l}=e;switch(x.value){case"multiple":return l;case"cascade":return function(e,l,t){const n=[];let a={[l.children]:e},i=0;for(;a&&a[l.children];){const e=a[l.children],s=t.value[i];a=o(s)?ie(e,s,l):void 0,!a&&e.length&&(a=ie(e,ne(e)[l.value],l)),i++,n.push(e)}return n}(l,d.value,i);default:return[l]}}),y=v(()=>w.value.some(e=>e.length)),T=v(()=>w.value.map((e,l)=>ie(e,i.value[l],d.value))),B=v(()=>w.value.map((e,l)=>e.findIndex(e=>e[d.value.value]===i.value[l]))),N=(e,l)=>{if(i.value[e]!==l){const t=i.value.slice(0);t[e]=l,i.value=t}},$=()=>({selectedValues:i.value.slice(0),selectedOptions:T.value,selectedIndexes:B.value}),_=()=>{u.forEach(e=>e.stopMomentum());const e=$();return I(()=>{const e=$();l("confirm",e)}),e},E=()=>l("cancel",$()),z=()=>w.value.map((o,a)=>h(re,{value:i.value[a],fields:d.value,options:o,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:f.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:e=>((e,t)=>{N(t,e),"cascade"===x.value&&i.value.forEach((e,l)=>{const t=w.value[l];ae(t,e,d.value)||N(l,t.length?t[0][d.value.value]:void 0)}),I(()=>{l("change",n({columnIndex:t},$()))})})(e,a),onClickOption:e=>((e,t)=>{const o={columnIndex:t,currentOption:e};l("clickOption",n($(),o)),l("scrollInto",o)})(e,a),onScrollInto:e=>{l("scrollInto",{currentOption:e,columnIndex:a})}},{option:t.option})),j=e=>{if(y.value){const l={height:`${f.value}px`},t={backgroundSize:`100% ${(e-f.value)/2}px`};return[h("div",{class:le("mask"),style:t},null),h("div",{class:[D,le("frame")],style:l},null)]}},F=()=>{const l=f.value*+e.visibleOptionNum,n={height:`${l}px`};return e.loading||y.value||!t.empty?h("div",{ref:a,class:le("columns"),style:n},[z(),j(l)]):t.empty()},P=()=>{if(e.showToolbar&&!s)return h(fe,S(H(e,me),{onConfirm:_,onCancel:E}),H(t,pe))},G=e=>{e.forEach((e,l)=>{e.length&&!ae(e,i.value[l],d.value)&&N(l,ne(e)[d.value.value])})};let L;return V(w,e=>G(e),{immediate:!0}),V(()=>e.modelValue,l=>{M(l,i.value)||M(l,L)||(i.value=l.slice(0),L=l.slice(0)),0===e.modelValue.length&&G(w.value)},{deep:!0}),V(i,t=>{M(t,e.modelValue)||(L=t.slice(0),l("update:modelValue",L))},{immediate:!0}),g("touchmove",b,{target:a}),m({confirm:_,getSelectedOptions:()=>T.value}),()=>{var l,n;return h("div",{class:le()},["top"===e.toolbarPosition?P():null,e.loading?h(O,{class:le("loading")},null):null,null==(l=t["columns-top"])?void 0:l.call(t),F(),null==(n=t["columns-bottom"])?void 0:n.call(t),"bottom"===e.toolbarPosition?P():null])}}});const ye=B(we),[ke,Ce]=t("switch"),Ve={size:c,loading:Boolean,disabled:Boolean,modelValue:N,activeColor:String,inactiveColor:String,activeValue:{type:N,default:!0},inactiveValue:{type:N,default:!1}};var Oe=i({name:ke,props:Ve,emits:["change","update:modelValue"],setup(e,{emit:l,slots:t}){const n=()=>e.modelValue===e.activeValue,o=()=>{if(!e.disabled&&!e.loading){const t=n()?e.inactiveValue:e.activeValue;l("update:modelValue",t),l("change",t)}},a=()=>{if(e.loading){const l=n()?e.activeColor:e.inactiveColor;return h(O,{class:Ce("loading"),color:l},null)}if(t.node)return t.node()};return $(()=>e.modelValue),()=>{var l;const{size:i,loading:s,disabled:u,activeColor:c,inactiveColor:r}=e,d=n(),v={fontSize:_(i),backgroundColor:d?c:r};return h("div",{role:"switch",class:Ce({on:d,loading:s,disabled:u}),style:v,tabindex:u?void 0:0,"aria-checked":d,onClick:o},[h("div",{class:Ce("node")},[a()]),null==(l=t.background)?void 0:l.call(t)])}}});const He=B(Oe),Se={class:"layout-bg p-[16px] flex-1"},Te={key:0},De={key:1},Ie=e("default",i({__name:"index",setup(e){const l=E(),t=v(()=>l.userInfo),n=v(()=>!!t.value.user_id),o=v({get:()=>z.value,set:()=>j()}),a=r(!1),i=v(()=>F.find(e=>e.value===P.value).text),s=r([P.value]);function u(e){P.value=e.selectedOptions[0].value,a.value=!1}function c(){n.value||K.push({name:"login",query:{redirect:"/profile"}})}return(e,l)=>{const r=J,d=Z,v=R,p=He,m=ye,f=X;return L(),G(q,null,[U("div",Se,[h(v,{inset:!0},{default:W(()=>[h(d,{center:"","is-link":!Y(n),onClick:c},{title:W(()=>[h(r,{src:Y(t).avatar||Y("data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1713850165468'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='6560'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M21.333%20512a490.667%20490.667%200%201%200%20981.334%200%20490.667%20490.667%200%201%200-981.334%200z'%20fill='%23E1E0FC'%20p-id='6561'%20data-spm-anchor-id='a313x.search_index.0.i0.216a3a81XzpQWQ'%3e%3c/path%3e%3cpath%20d='M155.733%20849.067c8.534-27.734%2019.2-46.934%2032-57.6C204.8%20774.4%20403.2%20710.4%20428.8%20682.667c25.6-27.734%2019.2-59.734%2014.933-74.667-4.266-14.933-49.066-59.733-59.733-106.667-27.733-27.733-34.133-78.933-21.333-87.466-12.8-76.8-6.4-108.8%208.533-132.267s27.733-83.2%2087.467-98.133%2087.466%2012.8%20125.866%2010.666C620.8%20192%20620.8%20183.467%20640%20192c19.2%208.533%202.133%2053.333%2019.2%2093.867%2017.067%2040.533%2010.667%2061.866%206.4%20123.733%2021.333%2034.133-6.4%2078.933-21.333%2091.733C633.6%20554.667%20590.933%20595.2%20586.667%20608c-2.134%2012.8-10.667%2072.533%2057.6%20104.533%2068.266%2032%20170.666%2061.867%20198.4%2078.934%2017.066%2012.8%2027.733%2032%2027.733%2057.6C772.267%20953.6%20652.8%201004.8%20512%201002.667c-140.8-2.134-260.267-53.334-356.267-153.6z'%20fill='%23F0EEFF'%20p-id='6562'%3e%3c/path%3e%3c/svg%3e"),round:"",class:"h-56 w-56"},null,8,["src"])]),value:W(()=>[Y(n)?(L(),G("span",Te,A(Y(t).nickname),1)):(L(),G("span",De,A(e.$t("profile.login")),1))]),_:1},8,["is-link"])]),_:1}),h(v,{title:e.$t("menus.basicSettings"),border:!1,inset:!0},{default:W(()=>[h(d,{center:"",title:e.$t("menus.darkMode")},{"right-icon":W(()=>[h(p,{modelValue:Y(o),"onUpdate:modelValue":l[0]||(l[0]=e=>Q(o)?o.value=e:null),size:"20px","aria-label":"on/off Dark Mode"},null,8,["modelValue"])]),_:1},8,["title"]),h(d,{"is-link":"",title:e.$t("menus.language"),value:Y(i),onClick:l[1]||(l[1]=e=>a.value=!0)},null,8,["title","value"])]),_:1},8,["title"]),h(v,{title:e.$t("menus.advancedSettings"),inset:!0},{default:W(()=>[h(d,{title:e.$t("profile.settings"),icon:"setting-o","is-link":"",to:"/settings"},{icon:W(()=>[...l[5]||(l[5]=[U("div",{class:"i-carbon:settings text-gray-400 mr-5 self-center"},null,-1)])]),_:1},8,["title"])]),_:1},8,["title"])]),h(f,{show:Y(a),"onUpdate:show":l[4]||(l[4]=e=>Q(a)?a.value=e:null),position:"bottom"},{default:W(()=>[h(m,{modelValue:Y(s),"onUpdate:modelValue":l[2]||(l[2]=e=>Q(s)?s.value=e:null),columns:Y(F),onConfirm:u,onCancel:l[3]||(l[3]=e=>a.value=!1)},null,8,["modelValue","columns"])]),_:1},8,["show"])],64)}}}));"function"==typeof ee&&ee(Ie)}}});
