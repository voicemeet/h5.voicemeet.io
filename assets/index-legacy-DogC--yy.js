System.register(["./logo-dark-legacy-DoRrXvRO.js","./index-legacy-B6MLUoZK.js","./index-legacy-DdMYMRhc.js","./index-legacy-DT0HhxBc.js","./index-legacy-DE7p7GI3.js","./route-block-legacy-LtztSDKr.js"],function(e,n){"use strict";var o,l,a,t,s,d,r,i,u,c,p,g,m,y,h,v,f,b,w,x,C,_,k,$,j,q,V,E,P,F,S,z,L;return{setters:[e=>{o=e.l,l=e.a,a=e.F,t=e._},e=>{s=e.d,d=e.u,r=e.f,i=e.ay,u=e.j,c=e.az,p=e.H,g=e.aA,m=e.c,y=e.a,h=e.o,v=e.h,f=e.g,b=e.e,w=e.m,x=e.w,C=e.ak,_=e.an,k=e.ao,$=e.t,j=e.y,q=e.v,V=e.aQ,E=e.aB,P=e.k,F=e._},e=>{S=e.C},null,e=>{z=e.F},e=>{L=e.b}],execute:function(){const n={id:"sms-login-wrapper",class:"layout-bg m-x-a p-[16px] text-center flex-1 w-7xl"},R={class:"mb-32 mt-20"},U={class:"rounded-3xl overflow-hidden"},A={class:"sms-code-wrapper mt-16 rounded-3xl overflow-hidden"},B={class:"mt-16"},H=s({__name:"index",setup(e){const{t:s}=d(),F=r(),L=i(),H=u(!1),I=u(!1),M=u(!1),Q=u(c.value);p(()=>c.value,e=>{Q.value=e});const W=g({phone:"",code:""}),D=m(()=>I.value?s("login.gettingCode"):s("login.getCode")),G=g({phone:[{validator:function(e){return e?/^1[3-9]\d{9}$/.test(e)?null:s("login.pleaseEnterCorrectPhone"):s("login.pleaseEnterPhone")}}],code:[{required:!0,message:s("login.pleaseEnterCode")}]});async function J(e){try{H.value=!0;const n=await L.smsLogin({authCode:e.code,mobile:e.phone,channel_id:10001});if(H.value=!1,n){const{redirect:e,...n}=F.currentRoute.value.query;await F.push({path:e||E,query:{...n}})}}catch(n){P.error(n)}}async function K(){if(!W.phone)return void V({type:"warning",message:s("login.pleaseEnterPhone")});if(!/^1[3-9]\d{9}$/.test(W.phone))return void V({type:"warning",message:s("login.pleaseEnterCorrectPhone")});I.value=!0;const e=await L.getCode({type:1,mobile:W.phone});I.value=!1,e?(M.value=!0,V({type:"success",message:`${s("login.sendCodeSuccess")}`})):V({type:"danger",message:`${s("login.sendCodeFailed")}`})}function N(){const e=F.currentRoute.value.query;F.push({name:"login",query:e})}return(e,s)=>{const d=w,r=z,i=S,u=_,c=a,p=t;return h(),y("div",n,[v("div",R,[f(d,{src:b(Q)?b(o):b(l),round:"",class:"rounded h-120 w-120",alt:"brand logo"},null,8,["src"])]),f(c,{model:b(W),rules:b(G),"validate-trigger":"onSubmit",onSubmit:J},{default:x(()=>[v("div",U,[f(r,{modelValue:b(W).phone,"onUpdate:modelValue":s[0]||(s[0]=e=>b(W).phone=e),rules:b(G).phone,name:"phone",type:"tel",placeholder:e.$t("login.phone")},null,8,["modelValue","rules","placeholder"])]),v("div",A,[f(r,{modelValue:b(W).code,"onUpdate:modelValue":s[2]||(s[2]=e=>b(W).code=e),modelModifiers:{trim:!0},rules:b(G).code,name:"code",placeholder:e.$t("login.code")},C({_:2},[b(M)?{name:"button",fn:x(()=>[f(i,{time:6e4,format:"sss",onFinish:s[1]||(s[1]=e=>M.value=!1)})]),key:"0"}:{name:"button",fn:x(()=>[f(u,{size:"small",type:"primary",disabled:b(I),plain:"",onClick:K},{default:x(()=>[k($(b(D)),1)]),_:1},8,["disabled"])]),key:"1"}]),1032,["modelValue","rules","placeholder"])]),v("div",B,[f(u,{loading:b(H),type:"primary","native-type":"submit",round:"",block:""},{default:x(()=>[k($(e.$t("menus.smsLogin")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),f(p,{block:"",style:j({"margin-top":b(q)(18)}),onClick:N},{default:x(()=>[k($(e.$t("login.loginWithPassword")),1)]),_:1},8,["style"])])}}});"function"==typeof L&&L(H),e("default",F(H,[["__scopeId","data-v-8bc2fdf0"]]))}}});
