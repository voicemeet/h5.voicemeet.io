System.register(["./logo-dark-legacy-CwN6rgl5.js","./index-legacy-Q2OzPyub.js","./index-legacy-CVR5Xta5.js","./index-legacy-N-nTIPpg.js","./index-legacy-ZtysKIka.js","./route-block-legacy-LtztSDKr.js"],function(e,n){"use strict";var o,l,a,t,s,d,r,i,u,c,p,g,m,y,h,v,f,b,w,x,C,_,k,$,j,q,V,E,F,P,S,z,R;return{setters:[e=>{o=e.l,l=e.a,a=e.F,t=e._},e=>{s=e.d,d=e.u,r=e.f,i=e.ay,u=e.j,c=e.az,p=e.H,g=e.aA,m=e.c,y=e.a,h=e.o,v=e.h,f=e.g,b=e.e,w=e.m,x=e.w,C=e.ak,_=e.an,k=e.ao,$=e.t,j=e.y,q=e.v,V=e.aQ,E=e.aB,F=e.k,P=e._},e=>{S=e.C},null,e=>{z=e.F},e=>{R=e.b}],execute:function(){const n={id:"sms-login-wrapper",class:"layout-bg m-x-a p-[16px] text-center flex-1 w-7xl"},U={class:"mb-32 mt-20"},A={class:"rounded-3xl overflow-hidden"},B={class:"sms-code-wrapper mt-16 rounded-3xl overflow-hidden"},H={class:"mt-16"},I=s({__name:"index",setup(e){const{t:s}=d(),P=r(),R=i(),I=u(!1),L=u(!1),M=u(!1),Q=u(c.value);p(()=>c.value,e=>{Q.value=e});const D=g({phone:"",code:""}),G=m(()=>L.value?s("login.gettingCode"):s("login.getCode")),J=g({phone:[{validator:function(e){return e?/^1[3-9]\d{9}$/.test(e)?null:s("login.pleaseEnterCorrectPhone"):s("login.pleaseEnterPhone")}}],code:[{required:!0,message:s("login.pleaseEnterCode")}]});async function K(e){try{I.value=!0;const n=await R.smsLogin({authCode:e.code,mobile:e.phone,channel_id:10001});if(I.value=!1,n){const{redirect:e,...n}=P.currentRoute.value.query;await P.push({path:e||E,query:{...n}})}}catch(n){F.error(n)}}async function N(){if(!D.phone)return void V({type:"warning",message:s("login.pleaseEnterPhone")});if(!/^1[3-9]\d{9}$/.test(D.phone))return void V({type:"warning",message:s("login.pleaseEnterCorrectPhone")});L.value=!0;const e=await R.getCode({type:1,mobile:D.phone});L.value=!1,e?(M.value=!0,V({type:"success",message:`${s("login.sendCodeSuccess")}`})):V({type:"danger",message:`${s("login.sendCodeFailed")}`})}function O(){const e=P.currentRoute.value.query;P.push({name:"login",query:e})}return(e,s)=>{const d=w,r=z,i=S,u=_,c=a,p=t;return h(),y("div",n,[v("div",U,[f(d,{src:b(Q)?b(o):b(l),round:"",class:"rounded h-120 w-120",alt:"brand logo"},null,8,["src"])]),f(c,{model:b(D),rules:b(J),"validate-trigger":"onSubmit",onSubmit:K},{default:x(()=>[v("div",A,[f(r,{modelValue:b(D).phone,"onUpdate:modelValue":s[0]||(s[0]=e=>b(D).phone=e),rules:b(J).phone,name:"phone",type:"tel",placeholder:e.$t("login.phone")},null,8,["modelValue","rules","placeholder"])]),v("div",B,[f(r,{modelValue:b(D).code,"onUpdate:modelValue":s[2]||(s[2]=e=>b(D).code=e),modelModifiers:{trim:!0},rules:b(J).code,name:"code",placeholder:e.$t("login.code")},C({_:2},[b(M)?{name:"button",fn:x(()=>[f(i,{time:6e4,format:"sss",onFinish:s[1]||(s[1]=e=>M.value=!1)})]),key:"0"}:{name:"button",fn:x(()=>[f(u,{size:"small",type:"primary",disabled:b(L),plain:"",onClick:N},{default:x(()=>[k($(b(G)),1)]),_:1},8,["disabled"])]),key:"1"}]),1032,["modelValue","rules","placeholder"])]),v("div",H,[f(u,{loading:b(I),type:"primary","native-type":"submit",round:"",block:""},{default:x(()=>[k($(e.$t("menus.sms-login")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),f(p,{block:"",style:j({"margin-top":b(q)(18)}),onClick:O},{default:x(()=>[k($(e.$t("login.login-with-password")),1)]),_:1},8,["style"])])}}});"function"==typeof R&&R(I),e("default",P(I,[["__scopeId","data-v-6b0694b4"]]))}}});
