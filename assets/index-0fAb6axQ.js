import{i as G,j as b,k as v,d as E,l as k,a as g,o as m,g as l,h as B,e as a,v as d,m as C,n as R,t as I,F as S,r as N,w as V,_ as D}from"./index-QU7l2Y_z.js";import{g as F,a as j}from"./activity-BdO8apth.js";import{b as y}from"./route-block-B_A1xBdJ.js";const M=G("giftbox",()=>{const _=b({}),o=b([]);return{giftBoxInfo:_,luckGiftList:o,getGiftBoxRuleInfo:async()=>{try{const t=await F(2);_.value=t||{}}catch(t){v.error(t)}},getLuckGifts:async()=>{try{const t=await j();o.value=t||[]}catch(t){v.error(t)}}}},{persist:!1}),q={class:"giftbox-wrapper"},z={class:"section"},A={key:0,class:"title"},L=E({__name:"index",setup(_){const o=M();o.getGiftBoxRuleInfo(),o.getLuckGifts();function h(t){const u=t||[],e=[];return u.forEach(n=>{let{name:r,gift_list:s}=n||{};s=s||[],s.forEach(i=>{e.push({gift_name:r,name:i.title}),(i.subs||[]).forEach(c=>{e.push({gift_name:r,name:c.name,money:c.money,rate:c.rate})})})}),e}function p(t){const u=t||[],e=[],n=[];return u.forEach(r=>{let{gift_list:s}=r||{};s=s||[];const i=e.length;s.forEach(c=>{e.push({row:e.length,col:1,rowspan:1,colspan:3}),(c.subs||[]).forEach(w=>{e.push({})})});const f=e.length;n.push({row:i,col:0,rowspan:f-i,colspan:0})}),e.concat(n)}return(t,u)=>{var s,i,f,c;const e=C,n=k("vxe-column"),r=k("vxe-table");return m(),g("div",q,[l(e,{class:"giftbox-bg",width:a(d)(375),height:a(d)(180),src:(s=a(o).giftBoxInfo)==null?void 0:s.image},null,8,["width","height","src"]),B("div",z,[(i=a(o).giftBoxInfo)!=null&&i.title?(m(),g("div",A,I((f=a(o).giftBoxInfo)==null?void 0:f.title),1)):R("",!0),B("ul",null,[(m(!0),g(S,null,N(((c=a(o).giftBoxInfo)==null?void 0:c.rules)||[],(x,w)=>(m(),g("li",{key:w},I(x),1))),128))])]),l(r,{class:"giftbox-table",data:h(a(o).luckGiftList),"merge-cells":p(a(o).luckGiftList),border:"",align:"center","cell-config":{height:a(d)(30)},"empty-text":"没有更多数据了！"},{default:V(()=>[l(n,{field:"gift_name",title:"礼盒名称",width:"25%"}),l(n,{field:"name",title:"礼物名称",width:"25%"}),l(n,{field:"money",title:"礼物价值（钻石）",width:"25%"}),l(n,{field:"rate",title:"礼物概率（‰）",width:"25%"})]),_:1},8,["data","merge-cells","cell-config"])])}}});typeof y=="function"&&y(L);const O=D(L,[["__scopeId","data-v-52b2c3c1"]]);export{O as default};
