<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Ball Fade In-Out Animation</title>
    <style>
      body {
        background: #f0f0f0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
      }
      .ball-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        opacity: 1; /* 默认可见 */
        background-image: url('../game-gift-bg.png');
        background-size: cover;
        background-repeat: no-repeat;
      }

      .gift {
        width: 30px;
        height: 30px;
        //background-color: #6da1ff;
        border-radius: 50%;
      }
    </style>
  </head>
  <body>
    <!-- 10 个小球 -->
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>
    <div class="ball-wrapper">
      <img class="gift" src="https://static.fenghuabl.cn/upload/202507/2/675831.png" />
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
      const allBalls = Array.from(document.querySelectorAll('.ball-wrapper'))
      const n = 5 // 可修改选中的数量
      const shuffled = allBalls.sort(() => 0.5 - Math.random())
      const selectedBalls = shuffled.slice(0, n)

      const tl = gsap.timeline()

      selectedBalls.forEach((ball, index) => {
        const isLast = index === selectedBalls.length - 1
        const repeatCount = isLast ? 5 : 0 // repeat: 2 => 播放三次（初始 + 2 次）

        tl.to(ball, {
          opacity: 0, // 从 1 → 0
          duration: 0.5,
          yoyo: true, // 自动反向 0 → 1
          repeat: repeatCount, // 总共闪烁次数
          ease: 'power1.inOut',
          onComplete: () => {
            gsap.set(ball, { opacity: 1 }) // 确保动画结束后完全恢复
          },
        })
      })
    </script>
  </body>
</html>
